(this["webpackJsonplibrary-app"]=this["webpackJsonplibrary-app"]||[]).push([[0],{26:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(10),r=n.n(o),s=n(3),i=n(4),a=n(7),l=n(2),d=n.n(l),b=n(0),j=function(e){var t=e.book,n=e.setBook,c=e.setListUpdated,o=e.edit,r=function(e){var c=e.target;n(Object(a.a)(Object(a.a)({},t),{},Object(i.a)({},c.name,c.value)))},s=t.title,l=t.author,j=t.edition;return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j=parseInt(j,10),""===s||""===l||j<=0?d.a.fire({icon:"error",title:"Oops...",text:"All fields are required"}):(o?(console.log("edit"),fetch("https://jossiel-library-api.herokuapp.com/books/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){console.log(e),"The book already exists"===e?d.a.fire({icon:"error",title:"Oops...",text:e}):(d.a.fire("Updated!","","success"),c(!0))}))):(console.log("add"),fetch("https://jossiel-library-api.herokuapp.com/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){console.log(e),"The book already exists"===e?d.a.fire({icon:"error",title:"Oops...",text:e}):(d.a.fire("Saved!","","success"),c(!0))}))),n({title:"",author:"",edition:0}))},children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),Object(b.jsx)("input",{type:"text",placeholder:"Title",name:"title",value:t.title,onChange:r,className:"form-control"})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"author",className:"form-label",children:"Author"}),Object(b.jsx)("input",{type:"text",placeholder:"Author",name:"author",value:t.author,onChange:r,className:"form-control"})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"edition",className:"form-label",children:"Edition"}),Object(b.jsx)("input",{type:"number",min:"1",name:"edition",value:t.edition,onChange:r,className:"form-control"})]}),Object(b.jsx)("div",{className:"d-grid gap-2",children:o?Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Edit"}):Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add"})})]})},h=function(e){var t=e.books,n=e.setListUpdated,c=e.updateBook;return Object(b.jsxs)("table",{className:"table table-dark table-striped",children:[Object(b.jsx)("thead",{style:{textAlign:"center"},children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"ID"}),Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Author"}),Object(b.jsx)("th",{children:"Edition"}),Object(b.jsx)("th",{children:"Delete"}),Object(b.jsx)("th",{children:"Edit"})]})}),Object(b.jsx)("tbody",{style:{textAlign:"center"},children:t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.id}),Object(b.jsx)("td",{children:e.title}),Object(b.jsx)("td",{children:e.author}),Object(b.jsx)("td",{children:e.edition}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){return t=e.id,void d.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&fetch("https://jossiel-library-api.herokuapp.com/books/"+t,{method:"DELETE"}).then((function(e){return e.text()})).then((function(e){console.log(e),d.a.fire("Deleted!","Your book has been deleted.","success"),n(!0)}))}));var t},children:"Delete"})}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return c(e)},children:"Edit"})})]},e.id)}))})]})},u=function(e){var t=e.brand;return Object(b.jsx)("div",{children:Object(b.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("a",{href:"#",className:"navbar-brand",children:t})})})})},m=function(){var e=Object(c.useState)({title:"",author:"",edition:0}),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)([]),i=Object(s.a)(r,2),a=i[0],l=i[1],d=Object(c.useState)(!1),m=Object(s.a)(d,2),O=m[0],x=m[1],p=Object(c.useState)(!1),f=Object(s.a)(p,2),y=f[0],v=f[1];Object(c.useEffect)((function(){console.log("useEffect"),fetch("https://jossiel-library-api.herokuapp.com/books").then((function(e){return e.json()})).then((function(e){return l(e)})),v(!1),x(!1)}),[y]);return console.log("hola"),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u,{brand:"Library App"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"row mt-5",children:[Object(b.jsxs)("div",{className:"col-lg-7",children:[Object(b.jsx)("h2",{style:{textAlign:"center",marginBottom:"15px"},children:"Book List"}),Object(b.jsx)(h,{books:a,setListUpdated:v,updateBook:function(e){o(e),x(!0)}})]}),Object(b.jsxs)("div",{className:"col-lg-5",children:[Object(b.jsx)("h2",{style:{textAlign:"center"},children:"Book Form"}),Object(b.jsx)(j,{book:n,setBook:o,setListUpdated:v,edit:O})]})]})})]})};r.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.c3c1cbfb.chunk.js.map